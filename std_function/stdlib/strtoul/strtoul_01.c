/*
strtoul 是 "string to unsigned long" 的缩写，是一个功能强大且推荐使用的字符串到无符号长整型整数的转换函数。
它比 atoi 或 atol 提供了更丰富的进制支持和更完善的错误处理机制。

函数原型:
strtoul 定义在头文件 <stdlib.h> 中。
unsigned long int strtoul(const char *nptr, char **endptr, int base);

功能概述:
strtoul 函数会解析一个表示整数的字符串 nptr，并将其转换为一个 unsigned long int 类型的值。
它会跳过字符串开头的空白字符（如空格、制表符等），然后根据 base 参数指定的进制进行转换。
------------------------------------------------------------------------------------------------
参数详解:

1. const char *nptr

含义：指向要转换的字符串的指针。

格式：这个字符串可以包含以下部分：

[空白字符]：可选的，函数会自动跳过。

[符号]：strtoul 会识别可选的 + 或 - 符号。但由于其返回类型是无符号的，如果遇到负号 -，
它通常会根据二进制补码的规则返回一个非常大的无符号数。

[前缀]：用于指示进制，仅在 base 参数为 0 或 16 时有效。

0x 或 0X 表示十六进制。

0 表示八进制。

[数字序列]：由符合指定进制的数字和字母组成（例如，十六进制中 0-9, a-f, A-F）。


2. char **endptr

含义：一个“二级指针”，即指向指针的指针。这是 strtoul 最强大的功能之一，主要用于错误检查。

用法：

如果你不关心转换在哪里结束，可以将其设置为 NULL。

如果你需要检查转换是否成功以及在哪里结束，你需要传入一个 char * 类型的指针的地址（例如 &my_end_pointer）。
函数执行后，会将第一个未被成功转换的字符的地址存入你提供的指针中。

通过 endptr 进行错误检查的模式：

完全没转换：如果转换后 *endptr 的值等于 nptr，说明字符串开头就不是一个有效的数字，没有发生任何转换。

部分转换：如果字符串是 "12345abc"，转换后 *endptr 会指向字符 'a'。这可以让你知道字符串中含有非数字的“垃圾”后缀。

完全转换：如果整个字符串都是有效的数字，*endptr 会指向字符串末尾的空字符 '\0'。


3. int base

含义：指定要解析的数字的进制。

取值范围：

2 到 36：明确指定进制。例如，10 表示十进制，16 表示十六进制，8 表示八进制，2 表示二进制。对于大于10的进制，
字母 a-z（不区分大小写）被用作数字（a=10, b=11, ...）。

0 (特殊值)：自动检测进制。这是非常方便的模式。

如果字符串以 0x 或 0X 开头，则按十六进制 (base=16) 解析。

如果字符串以 0 开头（但不是 0x），则按八进制 (base=8) 解析。

否则，按十进制 (base=10) 解析。
------------------------------------------------------------------------------------------------

返回值
成功：返回转换后的 unsigned long int 值。

无法转换：如果字符串中没有可转换的数字部分，返回 0。

溢出：如果转换后的值超出了 unsigned long int 的表示范围，返回 ULONG_MAX (定义在 <limits.h> 中)，
并将全局变量 errno (定义在 <errno.h> 中) 设置为 ERANGE。
------------------------------------------------------------------------------------------------

*/

// 用法示例
// 示例 1：基本用法
// 将一个十进制字符串转换为无符号长整型，不进行错误检查。
#include <stdio.h>
#include <stdlib.h>

int main() {
    const char *str = "12345";
    unsigned long val = strtoul(str, NULL, 10);
    printf("The converted value is: %lu\n", val); // %lu 是 unsigned long 的格式化符号
    return 0;
}
// 输出：The converted value is: 12345


